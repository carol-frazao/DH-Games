<!DOCTYPE html>
<html lang="pt-BR">

<head>

    <%- include('../partials/head') %>
        <link rel="stylesheet" href="/css/admin.css">

</head>

<body>

    <%- include('../partials/header') %>

        <main>

            <section class="editProduto">

            <div class="editarOferta">

                <span class="editar"> EDITAR PRODUTO </span>

                <br> <br>

                <form action="" method="post" enctype="multipart/form-data"
                    class="produtoOferta">
                    <div>
                        <label for="imagemProduto"> Imagem do produto: </label>
                        <br>
                        <input type="file" name="imagemProduto" id='imagemProduto' onchange="validaExtensao(this)">
                    </div>

                    <div>
                        <label for="nomeProduto"> Título do produto: </label>
                        <br>
                        <input type="text" name="nomeProduto" id="nomeProduto">
                    </div>

                    <div>
                        <label for="valorOriginal"> Valor original: </label>
                        <br>
                        <input type="number" step="0.01" name="valorOriginal" min="0.01" id="valorOriginal">
                    </div>

                    <div>
                        <label for="valorPromocional"> Valor promocional: </label>
                        <br>
                        <input type="number" step="0.01" name="valorPromocional" min="0.01" id="valorPromocional">
                    </div>

                    <button type="submit" class="btn-editarOferta"> Editar produto </button>

                </form>

            </div>

        </section>

        </main>

        <%- include('../partials/chat') %>

        <%- include('../partials/footer') %>

</body> 

<script type="text/javascript">

    function validaExtensao() {

        var arquivoInput = document.getElementById('imagemProduto');
        var caminhoArquivo = arquivoInput.value;
        var extensoesPermitidas = /(.jpg|.jpeg|.png)$/i;

        if (!extensoesPermitidas.exec(caminhoArquivo)) {

            alert('Por favor, envie um arquivo que tenha as extensões .jpeg, .jpg, ou .png ');
            arquivoInput.value = '';

            return false;

        } else {

            if (arquivoInput.files && arquivoInput.files[0]) {
                var reader = new FileReader();

                reader.readAsDataURL(arquivoInput.files[0]);

                console.log(arquivoInput.files[0].size / 1024 / 1024);
                console.log(arquivoInput.files[0].size);

                if (arquivoInput.files[0].size > 2097152) {
                    alert("Tamanho do arquivo deve ser 2 MB");
                    return false;
                }
            }
        }
    }

</script>

</html>